# 11장_브라우저의 렌더링 과정

## 렌더링 이란?
HTML, CSS, Javascript 등 개발자가 작성한 문서가 브라우저에 출력되는 과정을 말한다.
브라우저마다 렌더링을 수행하는 엔진을 가지고 있다.

## 렌더링 과정

1. DOM(Document Object Model), CSSOM(CSS Object Model) 생성

- DOM 트리 생성
Bytes -> Characters -> Tokens -> Nodes -> DOM 생성

- CSSOM 트리 생성
(head 태그 외부 css 파일을 참조하거나, head 태그에 style태그를 정의한 경우)
Bytes -> Characters -> Tokens -> Nodes -> CSSOM 생성

2. 렌더링 트리(Rendering Tree) 생성
DOM 트리와 CSSOM 트리를 결합해서 렌더링 트리를 생성한다.
렌더링 트리에는 페이지를 렌더링하는데 필요한 노드만 포함된다.

3. 레이아웃(Layout) 단계
뷰포트 내에서 각 요소의 정확한 위치와 크기를 정확하게 캡쳐하는 Box 모델 출력된다.
모든 상대적인 측정값은 화면에서 절대적인 픽셀단위로 변환된다.

4. 페인팅 단계 (래스터화)
렌더링 트리의 각 노드를 화면의 실제 픽셀로 변환.
레이아웃 단계에서 모든 계산이 완료되면, 화면에 요소들을 그리게 된다.
이미 레이아웃 단계에서 각 노드들의 위치, 크기, 색상 등 스타일이 모두 계산되었기 때문에 화면에 나타날 때 실제 픽셀로 변환하게 된다.

## 리플로우(Reflow), 리페인트(Repaint)
- 리플로우
사용자 인터렉션에 의해 발생되는 이벤트로 인해 새로운 HTML 요소가 추가되거나, 기존 요소의 스타일이 변경이 발생하면 
이런 변경을 통해 영향을 받게 되는 모든 노드에 대해서 렌더링 트리 생성과 레이아웃 과정을 다시 수행하게 된다.
이러한 과정을 리플로우라고 한다.

- 리페인트
리플로우 결과가 화면에 실제 그려지기 위해서는 다시 페인팅 단계를 수행해야한다. 이 과정을 리페인트라고 한다.

> 기존 요소에 변경사항이 생겼다고 해서 항상 리플로우와 리페인트가 일어나는것은 아니다. 레이아웃에 영향이 미치지않는 단순 색상변경같은 변경사항은 리페인트만 수행하게 된다.
> 리플로우가 일어나면 반드시 리페인트가 일어난다





