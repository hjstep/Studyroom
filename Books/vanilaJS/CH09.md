# 9장_자바스크립트의 메모리 관리

## 메모리 관리가 제대로 되지 않았을 때 나타나는 현상
- 메모리 누수(memory leak) : 성능이 서서히 낮아지는 현상
- memory bloat : 성능이 일정하게 낮아지는 형태

## 자바스크립트의 메모리 관리
자바스크립트는 고수준 언어로 객체가 생성되는 시점에 자동으로 메모리를 할당하고, 쓸모가 없어졌을 때 자동으로 메모리를 해제(가비지 콜렉션)한다.

### 메모리 할당 시점
자바스크립트는 값을 선언할 때 자동으로 메모리를 할당한다.

- 스택(Stack) 메모리 
> 정적 메모리 할당
스택 메모리는 정적 메모리 할당 시 사용된다.
원시값(문자열, Number, Boolean, undefined, null) 데이터는 데이터의 크기가 유한(finite)하고 정적(static)이기 때문에 스택 메모리에 저장된다.

- 힙(Heap) 메모리
> 동적 메모리 할당
힙 메모리는 동적 메모리 할당에 사용되며 실제 데이터가 저장되는 위치에 대한 참조(포인터)를 저장한다.
배열, Object, Map, Set과 같은 객체(참조값)는 저장되는 데이터가 동적으로 변동 가능하기 때문에 사용하는 시점에 얼마큼의 데이터 저장공간이 필요한지 알 수 없다.
따라서 객체는 변수에 할당되면, 그 식별자에는 실제 데이터가 저장되어있는 메모리 공간에 대한 위치를 알 수 있는 주소값(참조값)이 저장되어있다.

> 자바스크립트에서는 힙(Heap)메모리를 사용하는 변수에 null을 할당하면 메모리를 해제할 수 있다.
힙 메모리는 메모리를 더이상 사용하지 않게 되면 개발자가 직접 해제해서 메모리를 효율적으로 관리할 수 있음

### 메모리 해제
저수준 언어에서는 메모리가 필요 없어질 때를 개발자가 직접 결정하고 할당된 메모리를 직접 해제한다.
하지만 자바스크립트 같은 고수준 언어는 가비지 컬렉션(GC)이라는 자동 메모리 관리 방법을 사용한다.
가비지 컬렉션은 메모리 할당을 추적하고 할당된 메모리 블록이 더이상 필요하지 않게 됐는지를 판단하여 메모리를 회수한다.
가비지 컬렉션은 메모리를 더이상 사용하지 않는지를 스스로 판단하기에 알고리즘마다 작동하는 방식에 차이가 있다.

## 정리
- 원시값의 경우 메모리 해제는 스코프 벗어날 때 자동으로 일어난다.
- 참조값의 경우 null 할당은 그 객체가 더 이상 필요하지 않음을 나타내어 가비지 컬렉터가 메모리를 회수할 수 있는 시그널로 작용할 수 있다.
